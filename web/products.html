<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your products - Catalog</title>
  <link rel="stylesheet" href="./styles/styles.css">
  <link rel="stylesheet" href="./styles/products-styles.css">
</head>
<body>
  <div class="wrapper">
    <header>
      <strong>Logo</strong>
    </header>
    <main>
      <section class="page-section search-section">
        <div class="search-bar-top">
          <p>Hola, Andrea</p>
          <strong class="normal-text" style="color: black;">Que estas buscando hoy?</strong>
        </div>
        <div class="search-bar">
          <input class="search" type="text" placeholder="Buscar productos, marcas, etc">
          <!-- <input class="range" type="range" min="3000" max="100000" step="1000"> -->
          <button class="button button-primary">Filter products</button>
        </div>
      </section>
      <section id="products-section" class="page-section products-section">
        <!-- <div class="product">
          <div class="product-image-container"></div>
          <p>Product title</p>
          <strong>$99.99</strong>
          <button>Add to cart</button>
        </div> -->
      </section>
    </main>
    <footer>Footer</footer>
  </div>
  <script>
    const actualURL = new URL(window.location.href)
    const productsApiURL = actualURL.origin + "/products"
    const productsSection = document.getElementById("products-section")
    
    function generateProduct(product){
      const {product_name:name, product_price:price, product_image:imageURL} = product
      const productHTML = `<article class="product">
          <figure class="product-image">
            <img src="${imageURL}" alt="">
          </figure>
          <div class="product-description">
            <h1 class="small-text">${name}</h1>
            <p class="normal-text price">$${price}</p>
            <button class="button button-primary product-button">AÃ±adir al carrito</button>
          </div>
        </article>`

      productsSection.innerHTML += productHTML
    }

    fetch(productsApiURL)
    .then((res) => {
      if(!res.ok) throw new Error()
      return res.json()
    })
    .then((products) => {
      products.forEach((product) => generateProduct(product))
    })
  </script>
</body>
</html>